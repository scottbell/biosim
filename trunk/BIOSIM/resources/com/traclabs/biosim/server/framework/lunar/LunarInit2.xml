<?xml version="1.0"?>
<biosim xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='../BiosimInitSchema.xsd'>
	<Globals crewsToWatch="BaseCrewGroup EVACrewGroup" plantsToWatch="BaseBiomassRS" runTillN="2160" runTillCrewDeath="true" runTillPlantDeath="true">
		<comment>
			The lunar mission initialization for BioSim (scenario 2) 
			Has the following properties:
				- contains biomass
				- biomass combined with crew (air and water)
				*other properties same as scenario 1*
				- big H2 tank
				- 1 daily EVA
				- cabin leak (very small)
				- small C02 tank
				- roughly 11.82 MJ of energy expended by each crew member
				- 2 malfunctions
		</comment>
		<author>Scott Bell</author>
		<!-- <log4jProperty name="log4j.logger.com.traclabs.biosim.server.sensor" value="DEBUG"/> !-->
	</Globals>
	<SimBioModules>
		<air>
			<AirRS name="EVAAirRS" implementation="LINEAR">
				<powerConsumer maxFlowRates="100" desiredFlowRates="100" inputs="EVAPowerStore"/>
				<potableWaterConsumer maxFlowRates="100" desiredFlowRates="100" inputs="EVAPotableWaterStore"/>
				<airConsumer maxFlowRates="100" desiredFlowRates="100" inputs="EVACrewEnvironment"/>
				<CO2Consumer maxFlowRates="100" desiredFlowRates="100" inputs="EVACO2Store"/>
				<H2Consumer maxFlowRates="400" desiredFlowRates="400" inputs="EVAH2Store"/>
				<potableWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="EVAPotableWaterStore"/>
				<O2Producer maxFlowRates="100" desiredFlowRates="100" outputs="EVAO2Store"/>
				<airProducer maxFlowRates="100" desiredFlowRates="100" outputs="EVACrewEnvironment"/>
				<CO2Producer maxFlowRates="100" desiredFlowRates="100" outputs="EVACO2Store"/>
				<H2Producer maxFlowRates="100" desiredFlowRates="100" outputs="EVAH2Store"/>
				<methaneProducer desiredFlowRates="100" maxFlowRates="100" outputs="EVAMethaneStore"/>
			</AirRS>
			<OGS name="BaseOGS">
				<powerConsumer maxFlowRates="2500" desiredFlowRates="2500" inputs="BasePowerStore"/>
				<potableWaterConsumer maxFlowRates="10000000" desiredFlowRates="10000000" inputs="CrewBasePotableWaterStore"/>
				<O2Producer maxFlowRates="10000000" desiredFlowRates="10000000" outputs="BaseO2Store"/>
				<H2Producer maxFlowRates="10000000" desiredFlowRates="10000000" outputs="BaseH2Store"/>
			</OGS>
			<VCCR name="BaseVCCR">
				<powerConsumer maxFlowRates="100000" desiredFlowRates="100000" inputs="BasePowerStore"/>
				<airConsumer maxFlowRates="10000000" desiredFlowRates="10000000" inputs="BaseCrewEnvironment"/>
				<airProducer maxFlowRates="10000000" desiredFlowRates="10000000" outputs="BaseCrewEnvironment"/>
				<CO2Producer maxFlowRates="10000000" desiredFlowRates="10000000" outputs="BaseCO2Store"/>
			</VCCR>
			<O2Store name="BaseO2Store" capacity="2000" level="2000">
				<malfunction occursAtTick="200" length="PERMANENT_MALF" intensity="MEDIUM_MALF"/>
			</O2Store>
			<O2Store name="EVAO2Store" capacity="800" level="800" resupplyAmount="800" resupplyFrequency="24"/>
			<CO2Store name="BaseCO2Store" capacity="2000" level="2000"/>
			<CO2Store name="EVACO2Store" capacity="10" level="10"/>
			<H2Store name="BaseH2Store" capacity="1000" level="1000"/>
			<H2Store name="EVAH2Store" capacity="10" level="10"/>
			<NitrogenStore name="BaseNitrogenStore" capacity="5000" level="5000"/>
			<NitrogenStore name="EVANitrogenStore" capacity="10" level="10"/>
			<MethaneStore name="EVAMethaneStore" capacity="10" level="10"/>
		</air>
		<crew>
			<CrewGroup name="BaseCrewGroup">
				<potableWaterConsumer maxFlowRates="100" desiredFlowRates="100" inputs="CrewBasePotableWaterStore"/>
				<airConsumer maxFlowRates="0" desiredFlowRates="0" inputs="BaseCrewEnvironment"/>
				<foodConsumer maxFlowRates="100" desiredFlowRates="100" inputs="BaseFoodStore"/>
				<dirtyWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="CrewBaseDirtyWaterStore"/>
				<greyWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="CrewBaseGreyWaterStore"/>
				<airProducer maxFlowRates="0" desiredFlowRates="0" outputs="BaseCrewEnvironment"/>
				<dryWasteProducer maxFlowRates="100" desiredFlowRates="100" outputs="BaseDryWasteStore"/>
				<crewPerson name="Bob Roberts" age="35" weight="70" sex="MALE">
					<schedule>
						<activity name="sleep" length="8" intensity="1"/>
						<activity xsi:type="EVAActivityType" name="eva" length="4" intensity="3" evaCrewGroup="EVACrewGroup"/>
						<activity name="hygiene" length="1" intensity="2"/>
						<activity name="exercise" length="1" intensity="5"/>
						<activity name="eating" length="1" intensity="2"/>
						<activity name="mission" length="9" intensity="3"/>
						<activity name="health" length="1" intensity="2"/>
						<activity name="maintenance" length="1" intensity="2"/>
						<activity name="leisure" length="2" intensity="2"/>
					</schedule>
				</crewPerson>
				<crewPerson name="Stephanie Stevens" age="32" weight="71" sex="FEMALE">
					<schedule>
						<activity name="sleep" length="8" intensity="1"/>
						<activity name="hygiene" length="1" intensity="2"/>
						<activity name="exercise" length="1" intensity="5"/>
						<activity name="eating" length="1" intensity="2"/>
						<activity name="mission" length="9" intensity="3"/>
						<activity name="health" length="1" intensity="2"/>
						<activity name="maintenance" length="1" intensity="2"/>
						<activity name="leisure" length="2" intensity="2"/>
					</schedule>
				</crewPerson>
				<crewPerson name="Bill Williams" age="30" weight="72" sex="MALE">
					<schedule>
						<activity name="sleep" length="8" intensity="1"/>
						<activity name="hygiene" length="1" intensity="2"/>
						<activity name="exercise" length="1" intensity="5"/>
						<activity name="eating" length="1" intensity="2"/>
						<activity name="mission" length="9" intensity="3"/>
						<activity name="health" length="1" intensity="2"/>
						<activity name="maintenance" length="1" intensity="2"/>
						<activity name="leisure" length="2" intensity="2"/>
					</schedule>
				</crewPerson>
				<crewPerson name="Janet Janey" age="34" weight="75" sex="FEMALE">
					<schedule>
						<activity name="sleep" length="8" intensity="1"/>
						<activity name="hygiene" length="1" intensity="2"/>
						<activity name="exercise" length="1" intensity="5"/>
						<activity name="eating" length="1" intensity="2"/>
						<activity name="mission" length="9" intensity="3"/>
						<activity name="health" length="1" intensity="2"/>
						<activity name="maintenance" length="1" intensity="2"/>
						<activity name="leisure" length="2" intensity="2"/>
					</schedule>
				</crewPerson>
			</CrewGroup>
			<CrewGroup name="EVACrewGroup">
				<potableWaterConsumer maxFlowRates="100" desiredFlowRates="100" inputs="EVAPotableWaterStore"/>
				<airConsumer maxFlowRates="0" desiredFlowRates="0" inputs="EVACrewEnvironment"/>
				<foodConsumer maxFlowRates="100" desiredFlowRates="100" inputs="EVAFoodStore"/>
				<dirtyWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="EVADirtyWaterStore"/>
				<greyWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="EVAGreyWaterStore"/>
				<airProducer maxFlowRates="0" desiredFlowRates="0" outputs="EVACrewEnvironment"/>
				<dryWasteProducer maxFlowRates="100" desiredFlowRates="100" outputs="EVADryWasteStore"/>
			</CrewGroup>
		</crew>
		<environment>
			<SimEnvironment name="BaseCrewEnvironment" initialVolume="20000000" leakRate="0.00224" airlockVolume="3.7" dangerousOxygenThreshold="0.3"/>
			<SimEnvironment name="EVACrewEnvironment" initialVolume="1000" leakRate="0.00500" airlockVolume="999"/>
			<Dehumidifier name="Dehumidifier">
				<airConsumer maxFlowRates="200000" desiredFlowRates="200000" inputs="BaseCrewEnvironment"/>
				<dirtyWaterProducer maxFlowRates="200000" desiredFlowRates="200000" outputs="CrewBaseDirtyWaterStore"/>	
			</Dehumidifier>
		</environment>        
		<food>
			<FoodProcessor name="FoodProcessor">
				<powerConsumer maxFlowRates="100" desiredFlowRates="100" inputs="BasePowerStore"/>
				<biomassConsumer maxFlowRates="200" desiredFlowRates="200" inputs="BaseBiomassStore"/>
				<foodProducer maxFlowRates="200" desiredFlowRates="200" outputs="BaseFoodStore"/>
				<dryWasteProducer maxFlowRates="100" desiredFlowRates="100" outputs="BaseDryWasteStore"/>
				<waterProducer maxFlowRates="100 100" desiredFlowRates="100 100" outputs="CrewBaseDirtyWaterStore CrewBaseGreyWaterStore"/>
			</FoodProcessor>
			<BiomassRS name="BaseBiomassRS">
				<shelf cropArea="20" cropType="LETTUCE"/>
				<shelf cropArea="1.5" cropType="TOMATO"/>
				<powerConsumer maxFlowRates="400" desiredFlowRates="400" inputs="BasePowerStore"/>
				<potableWaterConsumer maxFlowRates="100" desiredFlowRates="100" inputs="CrewBasePotableWaterStore"/>
				<greyWaterConsumer maxFlowRates="100" desiredFlowRates="100" inputs="CrewBaseGreyWaterStore"/>
				<airConsumer maxFlowRates="0" desiredFlowRates="0" inputs="BaseCrewEnvironment"/>
				<dirtyWaterProducer maxFlowRates="100" desiredFlowRates="100" outputs="CrewBaseDirtyWaterStore"/>
				<biomassProducer maxFlowRates="100" desiredFlowRates="100" outputs="BaseBiomassStore"/>
				<airProducer maxFlowRates="0" desiredFlowRates="0" outputs="BaseCrewEnvironment"/>
			</BiomassRS>
			<BiomassStore name="BaseBiomassStore" capacity="1000" level="1000"/>
			<FoodStore name="BaseFoodStore" capacity="2000" level="2000"/>
			<FoodStore name="EVAFoodStore" capacity="0" level="0"/>
		</food>
		<framework>
			<Injector name="EVAInjector">
				<O2Consumer desiredFlowRates="30" maxFlowRates="30" inputs="EVAO2Store"/>
				<O2Producer desiredFlowRates="30" maxFlowRates="30" outputs="EVACrewEnvironment"/>
			</Injector>
			<Injector name="BaseO2Injector">
				<O2Consumer desiredFlowRates="30" maxFlowRates="30" inputs="BaseO2Store"/>
				<O2Producer desiredFlowRates="30" maxFlowRates="30" outputs="BaseCrewEnvironment"/>
			</Injector>
			<Injector name="BaseCO2Injector">
				<CO2Consumer desiredFlowRates="30" maxFlowRates="30" inputs="BaseCO2Store"/>
				<CO2Producer desiredFlowRates="30" maxFlowRates="30" outputs="BaseCrewEnvironment"/>
			</Injector>
		</framework>
		<power>
			<PowerPS name="PowerPS" generationType="SOLAR" upperPowerGeneration="7000000">
				<malfunction occursAtTick="502" length="TEMPORARY_MALF" intensity="SEVERE_MALF"/>
				<lightConsumer maxFlowRates="0" desiredFlowRates="0" inputs="BaseCrewEnvironment"/>
				<powerProducer maxFlowRates="7000000" desiredFlowRates="7000000" outputs="BasePowerStore"/>
			</PowerPS>
			<PowerStore name="BasePowerStore" capacity="5000000" level="5000000"/>
			<PowerStore name="EVAPowerStore" capacity="1000" level="1000"/>
		</power>
		<water>
			<WaterRS name="CrewWaterRS" implementation="LINEAR">
				<powerConsumer maxFlowRates="3000" desiredFlowRates="3000" inputs="BasePowerStore"/>
				<dirtyWaterConsumer maxFlowRates="10000000" desiredFlowRates="10000000" inputs="CrewBaseDirtyWaterStore"/>
				<greyWaterConsumer maxFlowRates="10000000" desiredFlowRates="10000000" inputs="CrewBaseGreyWaterStore"/>
				<potableWaterProducer maxFlowRates="10000000" desiredFlowRates="10000000" outputs="CrewBasePotableWaterStore"/>
			</WaterRS>
			<PotableWaterStore name="CrewBasePotableWaterStore" capacity="8000" level="8000"/>
			<PotableWaterStore name="EVAPotableWaterStore" capacity="2" level="2"/>
			<GreyWaterStore name="CrewBaseGreyWaterStore" capacity="4000" level="4000"/>
			<GreyWaterStore name="EVAGreyWaterStore" capacity="1" level="1"/>
			<DirtyWaterStore name="CrewBaseDirtyWaterStore" capacity="5000" level="5000"/>
			<DirtyWaterStore name="EVADirtyWaterStore" capacity="1" level="1"/>
		</water>
		<waste>
			<DryWasteStore name="BaseDryWasteStore" capacity="500" level="500"/>
			<DryWasteStore name="EVADryWasteStore" capacity="2" level="2"/>
		</waste>
	</SimBioModules>
	<Sensors>
		<environment>
			<GasConcentrationSensor gasType="O2" input="BaseCrewEnvironment" name="BaseCrewEnvironmentO2ConcentrationSensor"/>
			<GasConcentrationSensor gasType="VAPOR" input="BaseCrewEnvironment" name="BaseCrewEnvironmentVaporConcentrationSensor"/>
			<GasConcentrationSensor gasType="CO2" input="BaseCrewEnvironment" name="BaseCrewEnvironmentCO2AirConcentrationSensor"/>
		</environment>
		<framework>
			<StoreLevelSensor input="BaseO2Store" name="BaseO2StoreLevelSensor"/>
			<StoreLevelSensor input="BaseH2Store" name="BaseH2StoreLevelSensor"/>
			<StoreLevelSensor input="BaseCO2Store" name="BaseCO2StoreLevelSensor"/>
			<StoreLevelSensor input="BaseFoodStore" name="BaseFoodStoreLevelSensor"/>
			<StoreLevelSensor input="BasePowerStore" name="BasePowerStoreLevelSensor"/>
			<StoreLevelSensor input="CrewBaseDirtyWaterStore" name="CrewBaseDirtyWaterStoreLevelSensor"/>
			<StoreLevelSensor input="CrewBaseGreyWaterStore" name="CrewBaseGreyWaterStoreLevelSensor"/>
			<StoreLevelSensor input="CrewBasePotableWaterStore" name="CrewBasePotableWaterStoreLevelSensor"/>
		</framework>
	</Sensors>
	<Actuators>
		<air>
			<O2OutFlowRateActuator index="0" output="BaseOGS" name="BaseOGSO2OutFlowRateActuator"/>
			<H2OutFlowRateActuator index="0" output="BaseOGS" name="BaseOGSH2OutFlowRateActuator"/>
			<O2OutFlowRateActuator index="0" output="BaseOGS" name="BaseOGSO2OutFlowRateActuator"/>
			<H2OutFlowRateActuator index="0" output="BaseOGS" name="BaseOGSH2OutFlowRateActuator"/>
			<O2OutFlowRateActuator index="0" output="BaseO2Injector" name="BaseInjectorO2OutFlowRateActuator"/>
			<O2InFlowRateActuator index="0" output="BaseO2Injector" name="BaseInjectorO2InFlowRateActuator"/>
			<CO2OutFlowRateActuator index="0" output="BaseCO2Injector" name="BaseInjectorCO2OutFlowRateActuator"/>
			<CO2InFlowRateActuator index="0" output="BaseCO2Injector" name="BaseInjectorCO2InFlowRateActuator"/>
		</air>
		<food>
			<BiomassInFlowRateActuator index="0" output="FoodProcessor" name="FoodProcessorBiomassInFlowRateActuator"/>
			<HarvestingActuator output="BaseBiomassRS" name="BaseBiomassRSHarvestingActuator" shelfIndex="0"/>
			<PlantingActuator output="BaseBiomassRS" name="BaseBiomassRSPlantingActuator" shelfIndex="0"/>
		</food>
		<power>
			<PowerInFlowRateActuator index="0" output="FoodProcessor" name="FoodProcessorPowerInFlowRateActuator"/>
			<PowerInFlowRateActuator index="0" output="BaseOGS" name="BaseOGSPowerInFlowRateActuator"/>
			<PowerInFlowRateActuator index="0" output="CrewWaterRS" name="CrewWaterRSPowerInFlowRateActuator"/>
		</power>
		<water>
			<DirtyWaterInFlowRateActuator index="0" output="CrewWaterRS" name="CrewWaterRSDirtyWaterInFlowRateActuator"/>
			<GreyWaterInFlowRateActuator index="0" output="BaseBiomassRS" name="BaseBiomassRSGreyWaterInFlowRateActuator"/>
			<GreyWaterInFlowRateActuator index="0" output="CrewWaterRS" name="CrewWaterRSGreyWaterInFlowRateActuator"/>
			<PotableWaterInFlowRateActuator index="0" output="BaseOGS" name="BaseOGSPotableWaterInFlowRateActuator"/>
			<PotableWaterOutFlowRateActuator index="0" output="CrewWaterRS" name="BaseOGSPotableWaterOutFlowRateActuator"/>
		</water>
	</Actuators>
</biosim>

